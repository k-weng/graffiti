{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"Template.addUser.events({\n\t'submit .add-user': function (e) {\n\t\te.preventDefault();\n\t\tvar newUser = $(\"#userName\").val();\n\t\te.stopPropagation();\n\t\tvar inGroup = Groups.findOne({ _id: this._id, people: { $in: [newUser] } }) == null;\n\t\tvar groupId = this._id;\n\n\t\tMeteor.call('addUserMessage', newUser, function (error, result) {\n\t\t\tif (result) {\n\t\t\t\tSession.set('addUserMessages', result);\n\t\t\t\tconsole.log(\"The result is \" + result + \".\");\n\t\t\t\tconsole.log(\"Session has been set.\");\n\t\t\t}\n\t\t});\n\n\t\tconsole.log(\"Session is set to: \" + Session.get('addUserMessages') + \" .\");\n\n\t\tMeteor.call('doesUserExist', newUser, function (error, result) {\n\t\t\tif (error) return throwError(error.reason);\n\n\t\t\tif (result === 1 && inGroup) {\n\t\t\t\tMeteor.call('addUser', newUser, groupId);\n\t\t\t\tconsole.log(\"New user added\");\n\t\t\t\tconsole.log(Groups.find().fetch());\n\t\t\t}\n\t\t});\n\t}\n});\n\nTemplate.addUser.onCreated(function () {\n\tSession.set('addUserMessages', \"\");\n\tconsole.log(\"On created, session is \" + Session.get('addUserMessages'));\n});\n\nTemplate.addUser.helpers({\n\tmessage: function (field) {\n\t\tconsole.log(\"In message helper, session is \" + Session.get('addUserMessages'));\n\t\treturn Session.get('addUserMessages');\n\t}\n});","ast":null,"map":{"version":3,"sources":["/client/templates/groups/add_user.js"],"names":[],"mappings":"AAAA,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC;AACvB,mBAAkB,EAAE,UAAS,CAAC,EAAE;AAC/B,GAAC,CAAC,cAAc,EAAE,CAAC;AACnB,MAAI,OAAO,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,GAAG,EAAE,CAAC;AACnC,GAAC,CAAC,eAAe,EAAE,CAAC;AACpB,MAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,EAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,MAAM,EAAE,EAAC,GAAG,EAAE,CAAC,OAAO,CAAC,EAAC,EAAC,CAAC,IAAI,IAAI,CAAC;AAChF,MAAI,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC;;AAEvB,QAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,OAAO,EAAE,UAAU,KAAK,EAAE,MAAM,EAAE;AAC/D,OAAI,MAAM,EAAE;AACX,WAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;AACvC,WAAO,CAAC,GAAG,CAAC,gBAAgB,GAAG,MAAM,GAAG,GAAG,CAAC,CAAC;AAC7C,WAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;IACrC;GACD,CAAC,CAAC;;AAEH,SAAO,CAAC,GAAG,CAAC,qBAAqB,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAC,CAAC;;AAE3E,QAAM,CAAC,IAAI,CAAC,eAAe,EAAE,OAAO,EAAE,UAAU,KAAK,EAAE,MAAM,EAAE;AAC9D,OAAI,KAAK,EAAE,OAAO,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;AAE3C,OAAI,MAAM,KAAK,CAAC,IAAI,OAAO,EAAE;AAC5B,UAAM,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;AACzC,WAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;AAC9B,WAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC;IACnC;GACD,CAAC,CAAC;EAGH;CACD,CAAC,CAAC;;AAEH,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,YAAW;AACrC,QAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAAC;AACnC,QAAO,CAAC,GAAG,CAAC,yBAAyB,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;CACxE,CAAC,CAAC;;AAEH,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC;AACxB,QAAO,EAAE,UAAS,KAAK,EAAE;AACxB,SAAO,CAAC,GAAG,CAAC,gCAAgC,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC;AAC/E,SAAO,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;EACtC;CACD,CAAC,CAAC","file":"/client/templates/groups/add_user.js.map","sourcesContent":["Template.addUser.events({\n\t'submit .add-user': function(e) { \n\t\te.preventDefault();\n\t\tvar newUser = $(\"#userName\").val();\n\t\te.stopPropagation();\n\t\tvar inGroup = Groups.findOne({_id: this._id, people: {$in: [newUser]}}) == null;\n\t\tvar groupId = this._id;\n\n\t\tMeteor.call('addUserMessage', newUser, function (error, result) {\n\t\t\tif (result) {\n\t\t\t\tSession.set('addUserMessages', result);\n\t\t\t\tconsole.log(\"The result is \" + result + \".\");\n\t\t\t\tconsole.log(\"Session has been set.\");\n\t\t\t}\n\t\t});\n\n\t\tconsole.log(\"Session is set to: \" + Session.get('addUserMessages') + \" .\");\n\n\t\tMeteor.call('doesUserExist', newUser, function (error, result) {\n\t\t\tif (error) return throwError(error.reason);\n\n\t\t\tif (result === 1 && inGroup) {\n\t\t\t\tMeteor.call('addUser', newUser, groupId);\n\t\t\t\tconsole.log(\"New user added\");\n\t\t\t\tconsole.log(Groups.find().fetch());\n\t\t\t}\n\t\t});\n\n\t\t\n\t}\n});\n\nTemplate.addUser.onCreated(function() {\n\tSession.set('addUserMessages', \"\");\n\tconsole.log(\"On created, session is \" + Session.get('addUserMessages'));\n});\n\nTemplate.addUser.helpers({\n\tmessage: function(field) {\n\t\tconsole.log(\"In message helper, session is \" + Session.get('addUserMessages'));\n\t\treturn Session.get('addUserMessages');\n\t}\n});"]},"hash":"5d1281ecc060878787c24520c31fbbe2f6f59d46"}
